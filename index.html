<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tekken 8 Pixel 2D Fight</title>
  <style>
    body { background:#191926; color:#fff; margin:0; padding:0; font-family:'Segoe UI',Arial,sans-serif;}
    h1 { margin:24px auto 12px auto; text-align:center; font-size:2em;}
    #canvas { display:block; margin:18px auto; background:#181825; border-radius:20px; box-shadow:0 0 40px #0007; }
    .watermark { position:fixed; right:44px; bottom:24px; opacity:0.4; font-size:1.08em; font-family:monospace;
      background:#181825; color:#fbc531; padding:4px 26px; border-radius:13px; z-index:10; pointer-events:none;}
    .fight-btn, .random-btn {
      background: linear-gradient(90deg,#fbc531 70%,#e84118 100%);
      color:#232; border:none; border-radius:16px; font-size:1.1em;
      padding:12px 33px; font-weight:700; letter-spacing:1px; cursor:pointer; z-index:99;
      position: absolute; top:22px; right:32px; box-shadow:0 6px 30px #21214099;
      transition:background 0.17s, color 0.17s;
    }
    .random-btn { top:80px; }
    .fight-btn:hover, .random-btn:hover {background: linear-gradient(90deg,#e84118 80%,#fbc531 100%); color:#fff;}
    #info { text-align:center; font-size:1.15em; margin:8px auto 0 auto; }
    #pickers { display: flex; justify-content:center; gap:24px; margin:18px auto;}
    .pick-card { background:#212140; border-radius:18px; width:170px; padding:9px 12px;
      box-shadow:0 5px 20px #0002; margin:auto; text-align:center;}
    .pick-card img { width:120px; height:128px; object-fit:cover; border-radius:8px; margin:4px auto;}
    .pick-card button { margin-top:11px; margin-bottom:7px;}
    .healthbar {margin:3px auto 0 auto; display:flex;justify-content:center;}
    .hblabel{color:#fbc531;font-size:0.85em;font-weight:bold;margin-right:6px;}
    .hbbar{height:14px;border-radius:6px;background:#e84118;margin-top:7px;}
    @media(max-width:800px){
      #canvas{width:98vw !important; height:67vw !important;}
      .watermark{right:10vw;}
      .fight-btn,.random-btn{right:6vw;}
      .pick-card{width:84vw;}
      .pick-card img{width:72vw;height:auto;}
    }
    .secret-67 {
      position:fixed;font-size:3.5em;font-weight:900;z-index:99;color:#fbc531;
      animation:meme67 1.1s linear forwards;
      user-select:none;pointer-events:none;font-family:Impact,Arial,sans-serif;opacity:.85;text-shadow:1px 3px 15px #000;
    }
    @keyframes meme67 {
      from {opacity:0;transform:scale(.5)rotate(-30deg);}
      60%{opacity:1;}
      to{opacity:0;transform:scale(1.3)rotate(67deg);}
    }
  </style>
</head>
<body>
  <h1>Tekken 8: Pixel 2D Fight!</h1>
  <div id="info"></div>
  <div id="pickers"></div>
  <canvas id="canvas" width="640" height="350"></canvas>
  <button class="fight-btn" id="fightb" style="display:none;">Fight!</button>
  <button class="random-btn" id="randb">Random Fight!</button>
  <div class="watermark">by ian kishk</div>
  <script>
    // Your real images! Please host or swap URLs if needed
    const images_src = [
      "https://raw.githubusercontent.com/iankingsigma/tekkengame/main/img1.png", // Jin front pose
      "https://raw.githubusercontent.com/iankingsigma/tekkengame/main/img2.png", // golden 67
      "https://raw.githubusercontent.com/iankingsigma/tekkengame/main/img3.png", // Jin back pose
      "https://raw.githubusercontent.com/iankingsigma/tekkengame/main/img4.png"  // Ling Xiaoyu
    ];

    // Fighter meta
    const fighters = [
      {
        name:"Jin Kazama",
        img: images_src[0],
        pixel: images_src[2],
        color:"#d1132a", // gloves, outline
        healthMax:120,
        punch:23,
        description:"Jin Kazama – legendary fighter hell-bent on ending his family's curse."
      },
      {
        name:"Ling Xiaoyu",
        img: images_src[3],
        pixel: images_src[3],
        color:"#58a11d", // outfit, outline
        healthMax:97,
        punch:18,
        description:"Ling Xiaoyu – acrobatic martial artist overflowing with energy and technique."
      },
      {
        name:"Meme (67)",
        img: images_src[1],
        pixel: images_src[1],
        color:"#fbc531", // gold!
        healthMax:67,
        punch:67,
        description:"Secret Meme Fighter: 67. Chaos emerges!"
      }
    ];

    // Preload images
    const loaded = [null,null,null,null];
    let loadedCount = 0;
    images_src.forEach((src,i)=>{
      const img = new window.Image(); img.src = src;
      img.onload = ()=>{loaded[i]=img; loadedCount++;};
    });

    // UI, picker
    let picked = [null,null];
    function renderPickers() {
      document.getElementById('info').innerHTML = "<span style='color:#eee'>Pick your two fighters!</span>";
      document.getElementById('pickers').innerHTML = [
        0,1,2
      ].map(idx=>(
        `<div class="pick-card">
          <img src="${fighters[idx].img}" alt="${fighters[idx].name}">
          <div style="color:${fighters[idx].color};font-weight:bold;">${fighters[idx].name}</div>
          <div style="color:#fed;font-size:.99em;">${fighters[idx].description}</div>
          <div style="margin-bottom:4px;">
            <span class="hblabel">HP</span>
            <span class="hbbar" style="background:${fighters[idx].color};width:${fighters[idx].healthMax}px;"></span>
          </div>
          <span style="font-weight:bold;color:#e84118;">Punch: ${fighters[idx].punch}</span><br>
          <button onclick="chooseFighter(0,${idx})" style="margin-top:2px">${picked[0]==idx?'✓ Chosen':'Choose P1'}</button>
          <button onclick="chooseFighter(1,${idx})">${picked[1]==idx?'✓ Chosen':'Choose P2'}</button>
        </div>`
      )).join('');
      document.getElementById('fightb').style.display = (picked[0]!==null&&picked[1]!==null) ? 'block':'none';
    }
    function chooseFighter(pos, idx) {
      picked[pos]=idx;
      if(picked[0]==picked[1]) picked[1]=null; // Can't fight self (except Meme 67)
      renderPickers();
      drawIdle();
    }
    window.chooseFighter = chooseFighter;

    // Fight arena + logic
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let gameState = "idle"; // idle, fighting, over
    let animFrame = null;
    let hp = [0,0];
    let actor = 0; // whose turn (0/1)
    let lastWinner = null;
    let fightLog = [];
    let memeChaos = false;

    // Utility: pixelated shapes
    function drawFighter(x, y, fidx, flip=false, hpval=null) {
      ctx.save();
      ctx.translate(x, y);
      if (flip) ctx.scale(-1, 1);

      // Pixelated body (circle/rect), color
      ctx.globalAlpha = 0.97;
      ctx.beginPath();
      ctx.arc(0, 40, 35, 0, Math.PI*2);
      ctx.closePath();
      ctx.fillStyle = fighters[fidx].color;
      ctx.fill();

      // Gloves/hands - circles
      ctx.beginPath();
      ctx.arc(-38,62,12,0,Math.PI*2);
      ctx.arc(+38,62,12,0,Math.PI*2);
      ctx.closePath();
      ctx.fillStyle = "#e84118";
      ctx.fill();

      // Feet
      ctx.beginPath();
      ctx.arc(-18,100,7,0,Math.PI*2);
      ctx.arc(18,100,7,0,Math.PI*2);
      ctx.fillStyle="#666";
      ctx.fill();

      // Draw actual image pixelated (face/body overlay)
      if (loaded[fighters[fidx].pixel===images_src[3]?3:fighters[fidx].pixel===images_src[1]?1:fighters[fidx].pixel===images_src[2]?2:0]) {
        ctx.save();
        ctx.globalAlpha = 0.92;
        ctx.drawImage(loaded[fidx], -36, -36, 72, 82);
        ctx.restore();
      }
      ctx.globalAlpha = 1;
      // Health bar
      if (hpval!==null) {
        ctx.save();
        ctx.fillStyle="#212140";
        ctx.fillRect(-40,-56,80,12);
        ctx.fillStyle=fighters[fidx].color;
        ctx.fillRect(-40,-56,Math.max(2,(80*(hpval/fighters[fidx].healthMax))),12);
        ctx.font="bold 12px monospace";
        ctx.fillStyle="#fed";
        ctx.textAlign="center";
        ctx.fillText(hpval+"",0,-46);
        ctx.restore();
      }
      ctx.restore();
    }

    // Draw idle (fighters standing)
    function drawIdle() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle="#2d2e41";
      ctx.fillRect(0,0,canvas.width,canvas.height);

      if (picked[0]!==null) drawFighter(150,120,picked[0],false);
      if (picked[1]!==null) drawFighter(490,120,picked[1],true);
    }

    // FIGHT!
    function startFight() {
      if(picked[0]===null||picked[1]===null) return;
      hp = [fighters[picked[0]].healthMax, fighters[picked[1]].healthMax];
      actor = Math.round(Math.random()); // who starts
      gameState="fighting";
      lastWinner=null; fightLog=[];
      memeChaos=false;
      document.getElementById('info').innerHTML = '<span style="color:#fbc531">Battle starts! '+fighters[picked[actor]].name+" attacks first.</span>";
      fightStep();
    }

    // Main fight turns (animated punches)
    function fightStep() {
      if(gameState!=="fighting") return;
      let attacker = actor, defender = 1-actor;
      let atkX = attacker===0?150:490, defX = defender===0?150:490;
      let punchDist = attacker===0?+68:-68;
      let hitPower = fighters[picked[attacker]].punch + Math.round(Math.random()*12-6);
      hp[defender] = Math.max(0, hp[defender]-hitPower);
      fightLog.push(fighters[picked[attacker]].name+" punches ("+hitPower+" dmg)!");
      animatePunch(atkX, defX, picked[attacker], picked[defender], hp[attacker], hp[defender], punchDist, ()=>{
        if(hp[defender]<=0) {
          endFight(attacker);
        } else {
          actor=defender; // next actor
          setTimeout(fightStep, 750);
        }
      });
    }
    // Animate punch!
    function animatePunch(ax, dx, atkr, dfdr, ahp, dhp, punchDist, cb) {
      let t=0;
      function frame() {
        t++;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="#2d2e41";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        // attacker move forward + arm swing
        let move = t<=7 ? punchDist*(t/7) : punchDist; // lunge
        drawFighter(ax+move,120,atkr,atkr==picked[1],ahp);
        // defender shakes when hit
        let defendShake = (t>=9 && t<=15) ? 14*(Math.sin(Math.PI*(t-9)/6)) : 0;
        drawFighter(dx+defendShake,120,dfdr,dfdr==picked[1],dhp);
        // Impact effect
        if(t==9){
          ctx.save();
          ctx.globalAlpha=0.92;
          ctx.font="bold 34px Arial";
          ctx.fillStyle="#fbc531";
          ctx.textAlign="center";
          ctx.fillText("POW!",dx,120);
          ctx.restore();
          // For Meme 67, unleash the golden chaos!
          if(fighters[picked[atkr]].name==="Meme (67)"||fighters[picked[dfdr]].name==="Meme (67)") {
            memeChaos=true; spam67();
          }
        }
        if(t<19) animFrame = requestAnimationFrame(frame);
        else {
          drawFighter(ax,120,atkr,atkr==picked[1],ahp);
          drawFighter(dx,120,dfdr,dfdr==picked[1],dhp);
          if(cb) setTimeout(cb,340);
        }
      }
      frame();
    }
    // End fight
    function endFight(winIdx){
      gameState="over";
      lastWinner=winIdx;
      drawFighter(150,120,picked[0],false,hp[0]);
      drawFighter(490,120,picked[1],true,hp[1]);
      document.getElementById('info').innerHTML = `<span style="font-size:1.25em;color:#fbc531">Winner: ${fighters[picked[winIdx]].name}!</span>
        <br><span style="color:#9af">${fightLog.join(' ')}</span>`;
    }

    // Golden "67" meme
    function spam67() {
      for(let i=0;i<67;i++) {
        setTimeout(()=>{
          const s=document.createElement('span');
          s.className='secret-67';
          s.textContent='67';
          s.style.left=(Math.random()*window.innerWidth*0.8)+'px';
          s.style.top=(Math.random()*window.innerHeight*0.8)+'px';
          document.body.appendChild(s);
          setTimeout(()=>s.remove(), 1100+Math.random()*500);
        },Math.random()*777);
      }
    }

    // Random Fight: picks random fighters and starts combat
    function randomFight() {
      let idxs=[0,1,2];
      let f1 = idxs[Math.floor(Math.random()*idxs.length)];
      let left = f1, right;
      do { right = idxs[Math.floor(Math.random()*idxs.length)]; }
      while(right===left && fighters[left].name!=="Meme (67)");
      picked=[left,right];
      renderPickers(); drawIdle();
      setTimeout(()=>{document.getElementById('fightb').style.display='block';startFight();},550);
    }

    // Event
    document.getElementById('fightb').onclick=startFight;
    document.getElementById('randb').onclick=randomFight;

    // Initial
    renderPickers();
    drawIdle();
  </script>
</body>
</html>
